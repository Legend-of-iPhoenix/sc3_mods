'use strict';let e={};class f{constructor(a,b,d,c){console.log('Loaded Mod "'+b+'"');this.name=b;this.a=d;this.b=c;this.b||(d=document.getElementById("sc3_mods"),c=document.createElement("button"),c.classList.add("sc3_interface_button"),c.onclick=this.a,c.innerText=b,d.appendChild(c));e[a]=this}}{let a=document.getElementById("proj_buttons"),b=document.createElement("div");b.classList.add("project_pane");b.id="sc3_mods";a.appendChild(b)}let g=!1;
new f("fullscreen_toggle","Toggle Fullscreen",()=>{"#user_tools_parent #sidebar_parent #sc3_container>div.gradient_edge #sc3_columns>.jstified_edge #sc3_columns>.jstified_edge2 #sc3_columns>.jstified_shutter".split(" ").map(b=>{document.querySelector(b).style.display=g?"":"none"});let a=document.querySelector("#page_content_parent");a.style.width=g?"":"100%";a.style.overflow=g?"":"initial";g=!g});
new f("local_save","Save Project Locally",()=>{try{localStorage.setItem("proj",JSON.stringify(proj))}catch(a){console.error(a);setEdMsgBad("There was an error saving your project locally.");return}setEdMsgOK("Saved local copy of project successfully.")});
new f("local_load","Load Local Project",()=>{let a=void 0;try{a=JSON.parse(localStorage.getItem("proj"))}catch(b){$.msgBox({type:"error",icon:"/sc/img/64x64_error.png",title:"Failed to read data from local storage.",content:"Your data may have been invalid, erased, or too large."});return}null==a?$.msgBox({type:"error",icon:"/sc/img/64x64_error.png",content:"No local save was found."}):e.parse_text.a(a)&&setEdMsgOK("Loaded local copy of project successfully.")});
new f("export_text","Export Project as Text",()=>{createTextDialog(JSON.stringify(proj),!0)});
new f("parse_text","Text Parser",a=>{try{let b=proj.files.length;for(let d=0;d<b;d++){let c=a.files[d];if(c){let h=new sc3_file(c.type,c.subType);Object.assign(h,c);a.files[d]=h}else delete a.files[d]}}catch(b){return console.error(b),$.msgBox({type:"error",icon:"/sc/img/64x64_error.png",title:"Failed to load project from text",content:"The data was formatted improperly."}),!1}proj=new sc3_proj;Object.assign(proj,a);proj.loadToPage(proj.projectCurIdx);proj.refreshProjectPane();return!0},!0);
new f("load_text","Import Project from Text",()=>{let a=prompt("Paste the text here. \n THIS WILL OVERWRITE YOUR CURRENT PROJECT");null==a?$.msgBox({type:"error",icon:"/sc/img/64x64_error.png",title:"No text inputted.",content:""}):(a=JSON.parse(a),e.parse_text.a(a)&&setEdMsgOK("Loaded project from text successfully!"))});
